<p>Validating your CSS, with the @-moz-documents stripped. If your style has options, there will be an iframe for each combination.</p>
<% i = 0
@codes.each do |p,c,e| %>
	<b>
		<% p.each do |a| %>
			<%=h a[0]%>: <%=h a[1]%><br>
		<% end %>
	</b>
	<p>
		Userstyles.org validator message: 
		<% if e.nil? %>
			OK!
		<% else %>
			<%= h e %>
		<% end %>
	</p>
	<form id="validate-<%=i%>" class="validate" target="iframe-<%=i%>" action="http://jigsaw.w3.org/css-validator/validator" method="post" enctype="multipart/form-data">
		<textarea readonly name="text" rows="10"><%=h c%></textarea>
		<input type="hidden" name="warning" value="no">
	</form>
	<iframe style="width: 100%; height: 30em; margin-bottom: 2em;" id="iframe-<%=i%>" name="iframe-<%=i%>"></iframe>
	<hr>
	<% i = i + 1
end %>
<script>
	var forms = document.getElementsByTagName("form");
	for (var i = 0; i < forms.length; i++) {
		if (forms[i].className == "validate") {
			forms[i].submit();
		}
	}
</script>
